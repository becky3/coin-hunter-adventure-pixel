# Geminiによるレビュー・テストプロセス引き継ぎ

作成日: 2025-06-28
作成者: Gemini
対象: Claude Code

## 概要

本ドキュメントは、GeminiがPull Requestのレビューおよびテストを行う際の標準的なプロセスを記述します。
これにより、Claude CodeがGeminiからのフィードバックをより効率的に理解し、対応できるようになることを目的とします。

## プロセスフロー

Geminiは、Pull Requestのレビュー依頼を受けた際、以下のステップで作業を進めます。

1.  **Pull Requestの概要把握:**
    *   `gh pr view <PR番号>` コマンドを使用し、PRのタイトル、説明、関連Issueを確認します。
    *   特に、`handover-docs/claude-to-gemini/<日付>_<機能名>.md` に記載された詳細な実装内容とテスト手順を確認します。

2.  **ブランチのチェックアウト:**
    *   `gh pr checkout <PR番号>` コマンドを使用し、対象のブランチをローカルにチェックアウトします。

3.  **コード品質チェック (Lint):**
    *   `npm run lint` コマンドを実行し、コードスタイルや潜在的なエラーを確認します。
    *   問題があれば、PRコメントで修正を依頼します。

4.  **自動テストの実行:**
    *   `package.json` に定義されたテストスクリプト（例: `npm run test:simple`, `node tests/puppeteer/test-gameplay.js`, `node tests/puppeteer/test-performance.js` など）を実行します。
    *   テストが失敗した場合、エラーメッセージを分析し、原因を特定します。
    *   修正が必要な場合は、PRコメントで具体的な修正内容を依頼します。
        *   **重要:** コメントには `ID: GEMINI-REVIEW-YYYYMMDD-XX` の形式でユニークなIDを付与します。
        *   コードスニペットやパスを含む場合、シェルが誤って解釈しないよう、必要に応じてエスケープ処理を考慮します（ただし、基本的にはClaudeが修正するため、具体的なエスケープ方法はClaudeに任せます）。

5.  **手動テストと目視確認:**
    *   開発サーバーを起動し、ブラウザでゲームをプレイして、実装された機能の動作を目視で確認します。
    *   特に、アニメーションの自然さ、効果音のタイミング、UIの表示、衝突判定の精度など、自動テストでは確認が難しい項目を重点的に確認します。
    *   スクリーンショットを撮影し、その内容を分析して表示の確認を行います。
    *   問題があれば、PRコメントで修正を依頼します（ユニークIDを付与）。

6.  **フィードバックと修正依頼:**
    *   発見された問題点や改善提案は、Pull Requestのコメントとして投稿します。
    *   コメントには、問題の具体的な説明、再現手順、期待される結果、そして修正を含めます。
    *   Claudeによる修正が完了した旨のコメント（例: `ID: CLAUDE-FIX-YYYYMMDD-XX`）を受け取った後、再度テストとレビューを行います。

7.  **最終承認:**
    *   すべてのテストとレビューが完了し、問題がないと判断した場合、LGTMコメントを投稿します。
    *   Geminiは自身のPRを承認できないため、ユーザーにPRのマージを依頼します。

## 今後の改善点

*   **テストカバレッジの向上:** 自動テストでカバーできる範囲を広げることで、手動テストの負担を軽減できます。
*   **パフォーマンス計測の自動化:** より詳細なパフォーマンスレポートを自動生成する仕組みを検討します。

## 競合を避けるための注意点

*   本ドキュメントはGeminiの作業プロセスを記述するものであり、Claude Codeの実装内容や設計思想に直接言及しません。
*   Claude Codeが作成する引き継ぎ資料 (`handover-docs/claude-to-gemini/`) とは異なる目的を持つため、内容の重複は最小限に抑えます。
*   Geminiからのフィードバックは常にPull Requestのコメントとして行い、Claude Codeが参照しやすいようにします。