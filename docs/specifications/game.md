---
layout: default
title: ゲーム仕様
parent: 仕様書
---

# ゲーム仕様

## 概要

Coin Hunter Adventure Pixelは、レトロゲーム風の2D横スクロールアクションゲームです。プレイヤーはコインを集めながら敵を避け、制限時間内にゴールを目指します。

## ゲームルール

### 勝利条件
- 制限時間内（300秒）にゴールフラッグに到達

### 敗北条件
- ライフが0になる
- 時間切れ

## スコアシステム

| アクション | 獲得スコア |
|-----------|-----------|
| コイン収集 | 10点 |
| 敵撃破 | 100点 |
| タイムボーナス | 残り時間 × 10点 |

## 操作方法

| キー | アクション |
|------|-----------|
| ← / → | 左右移動 |
| スペース / ↑ | ジャンプ |
| . (ピリオド) | 攻撃（パワーグローブ装備時） |
| P | ポーズ |
| M | 音楽ミュート |

## プレイヤー仕様

### 基本仕様
- **サイズ**: 
  - 通常時: 16×32ピクセル
  - 小さい時: 16×16ピクセル
- **移動速度**: 1.17ピクセル/フレーム
- **初期ライフ**: 3
- **ジャンプ**: 押し続けで高さ調整可能（可変ジャンプ）
- **踏みつけ**: 敵の上から落下中に接触で撃破可能

### ダメージシステム
- **大きい状態でダメージ**: 小さくなる（ライフは減らない）
- **小さい状態でダメージ**: 死亡（ライフが1減る）
- **無敵時間**: ダメージ後2秒間

## 敵キャラクター

### スライム（地上敵）
- 地面を左右に往復移動
- 足場の端で方向転換
- 踏みつけで倒せる

### 鳥（飛行敵）
- 水平飛行＋波状の上下運動
- 画面端でループ
- 踏みつけで倒せる

### コウモリ（Bat）
- **通常状態**: 天井にぶら下がって待機
- **プレイヤー検知**: X軸距離80ピクセル以内で起動
- **飛行パターン**: 
  - 放物線を描きながら飛行（天井16px ⇔ 地面160px）
  - 左右120ピクセルの範囲をパトロール
- **特徴**:
  - 物理エンジンを使わない独自の移動ロジック
  - 踏みつけで倒せる（100点獲得）

### スパイダー（Spider）
- **通常状態**: 天井を左右に這い回る（巡回範囲60ピクセル）
- **プレイヤー検知**: X軸距離100ピクセル以内かつ下方にいる場合
- **攻撃パターン**:
  - 糸を使って最大80ピクセル降下
  - 2秒間待機後、天井に戻る
- **特徴**:
  - 物理エンジンを使わない独自の移動ロジック
  - 踏みつけで倒せる（150点獲得）

## アイテム・ギミック

| アイテム | 効果 |
|---------|------|
| コイン | 10点獲得 |
| スプリング | 高ジャンプ（バウンス力25） |
| ゴールフラッグ | ステージクリア |
| パワーグローブ | プレイヤーが大きくなり、エネルギー弾を発射可能になる |
| シールドストーン | ダメージを1回無効化するシールドを付与 |

### パワーグローブ仕様
- **効果**: 
  - プレイヤーサイズが大きくなる（ダメージ無効化）
  - エネルギー弾を発射可能（ピリオドキーで発射）
- **エネルギー弾仕様**:
  - 最大画面内存在数: 2発（PowerGloveConfig.maxBulletsOnScreen）
  - 発射間隔: 300ms（PowerGloveConfig.fireRate）
  - 弾速度: 5ピクセル/フレーム
  - ダメージ: 1
  - 有効距離: 発射地点から300ピクセル
- **解除条件**: ダメージを受けると効果が失われる

### シールドストーン仕様
- **効果**: 
  - ダメージを1回無効化
  - プレイヤーの左右に括弧型「（）」のシールドスプライトを表示
- **解除条件**: 
  - ダメージを受けると破壊される
  - 破壊時に1秒間の点滅エフェクトと無敵時間

## ステージ仕様

### 基本仕様
- **サイズ**: 横3000×縦240ピクセル
- **制限時間**: 300秒（5分）
- **カメラ**: プレイヤー中心の横スクロール

### ステージ構成
- **ステージ1**: 3つのエリアで構成
  - エリア1（stage1-1）: 基本的なプラットフォーム
  - エリア2（stage1-2）: ジャンプの応用が必要
  - エリア3（stage1-3）: 総合的なチャレンジ

- **開発用ステージ**:
  - **stage0-1～0-3**: チュートリアル、検証用の短いステージ
  - **stage0-4 (ENEMY DEMO)**: 敵の動作確認用デモステージ
    - 幅120タイル（1920ピクセル）の平坦な地形
    - スプリングとゴールのみ配置
    - URLパラメータ `?s=0-4` で直接アクセス可能
    - Oキーで敵生成ダイアログを開いて敵をテスト

### ステージ遷移システム
- **自動遷移**: エリアクリア後、次のエリアへ自動的に進行
- **エンディング**: エリア3クリア後に表示
- **環境による制御**: 
  - 本番環境（index.html）: 遷移有効
  - テスト環境: 遷移無効（メニューに戻る）
- **パワーアップの持ち越し**: 
  - ステージクリア時、取得済みのパワーアップは次ステージに引き継がれる
  - 死亡（リスポーン）時は全てのパワーアップが失われる

## 物理演算

### 基本パラメータ
- **重力**: 0.433（調整済み）
- **最大落下速度**: 10
- **当たり判定**: 矩形衝突判定（AABB）

### ジャンプ仕様
- **ジャンプ力**: 5.25（調整済み）
- **可変ジャンプブースト**: 0.15
- **滞空時間**: 元の1.5倍
- **ジャンプ高さ**: 元の70%
- **特徴**: エリア2の穴を越えやすい設計

## ゲームフロー

1. タイトル画面
   - START GAME: ゲーム開始
   - HOW TO PLAY: 操作説明
   - CREDITS: クレジット表示
   - SOUND TEST: サウンドテスト（BGM/SE確認）
2. ゲームプレイ
3. リザルト画面（クリア/ゲームオーバー）

## 画面表示（HUD）

- **左上**: スコア、ライフ（ハートアイコン）、コイン収集数
- **右上**: 残り時間（MM:SS形式）