# ゲーム仕様書 - コインハンターアドベンチャー

## 概要
コインハンターアドベンチャーは、レトロゲーム風の2D横スクロールアクションゲームです。プレイヤーはコインを集めながら敵を避けたり倒したりして、制限時間内にゴールを目指します。

## ゲームの基本ルール

### 勝利条件
- 制限時間内にゴールフラッグに到達する

### 敗北条件
- ライフが0になる
- 制限時間（300秒）を超過する

### スコアリング
- コイン収集: 10点
- 敵撃破: 100点
- タイムボーナス: (残り時間 × 10)点

## プレイヤーの仕様

### 基本パラメータ
- サイズ: 40×60ピクセル
- 初期位置: x:100, y:300
- 移動速度: 3.5ピクセル/フレーム
- 最大ライフ: 2

### 操作方法
| 入力 | アクション |
|------|-----------|
| ← / → | 左右移動 |
| スペース / ↑ | ジャンプ |
| P | ポーズ |

### ジャンプメカニクス
- **可変ジャンプシステム**
  - 初期ジャンプ力: 12
  - 最小ジャンプ時間: 8フレーム
  - 最大ジャンプ時間: 20フレーム
  - ボタンを押し続けることで高さ調整可能
  - 上昇中の重力補正: 1.8倍

### ダメージシステム
- 敵との接触で1ダメージ
- ダメージ後の無敵時間: 120フレーム
- 無敵中は点滅表示

### 踏みつけメカニクス
- 敵の上から落下中に接触すると敵を倒せる
- 踏みつけ成功時: 
  - 100点獲得
  - 上方向に自動バウンド（velY = -10）

## 敵キャラクターの仕様

### スライム（地上敵）
- サイズ: 50×40ピクセル
- 移動速度: 0.7ピクセル/フレーム
- 行動パターン:
  - 地面を左右に往復移動
  - 足場の端で方向転換
  - 重力の影響を受ける
  - 踏みつけで倒せる

### 鳥（飛行敵）
- サイズ: 40×30ピクセル
- 移動速度: 1.4ピクセル/フレーム
- 行動パターン:
  - 水平方向に飛行
  - 正弦波状の上下運動（振幅30ピクセル）
  - 画面端でループ
  - 重力の影響を受けない
  - 踏みつけで倒せる

## アイテムとギミック

### コイン
- サイズ: 30×30ピクセル
- 獲得時: 10点加算
- 回転アニメーション付き

### スプリング
- サイズ: 60×40ピクセル
- 機能: 上に乗ると高くジャンプ（バウンス力: 25）
- アニメーション: 押された時に縮む

### ゴールフラッグ
- サイズ: 60×80ピクセル
- 機能: 接触でステージクリア

## ステージ構成

### ステージサイズ
- 横幅: 3000ピクセル（横スクロール）
- 高さ: 576ピクセル

### カメラシステム
- プレイヤーを中心に横スクロール
- 画面外のオブジェクトは処理を軽減

### ステージ要素
1. **地形**
   - 基本プラットフォーム
   - 移動床（実装予定）
   - 落とし穴

2. **配置物**
   - 敵キャラクター
   - コイン
   - スプリング
   - ゴールフラッグ

### 制限時間
- 1ステージあたり300秒（5分）
- 残り時間はタイムボーナスに反映

## 物理演算

### 重力
- 基本重力: 0.65
- 最大落下速度: 15

### 当たり判定
- 矩形同士の衝突判定
- プラットフォーム: 上からのみ乗れる（一方通行）
- 壁: 左右からの侵入をブロック

## UI/UX仕様

### HUD（ヘッドアップディスプレイ）
- スコア表示（左上）
- ライフ表示（ハートアイコン）
- コイン収集数
- 残り時間（MM:SS形式）

### エフェクト
- ダメージ時: 画面が赤くフラッシュ
- コイン獲得時: スコアのフローティングテキスト
- 敵撃破時: パーティクルエフェクト
- ゴール時: 花火エフェクト

### サウンド
- BGM: ステージごとに設定
- 効果音:
  - ジャンプ
  - コイン獲得
  - 敵撃破
  - ダメージ
  - スプリング
  - ゲームオーバー
  - ステージクリア

## ゲームフロー

### タイトル画面
- ゲームタイトル表示
- 「START」ボタン
- 操作説明

### ゲームプレイ
1. ステージ開始
2. プレイヤー操作可能
3. 以下のいずれかで終了:
   - ゴール到達 → ステージクリア画面
   - ライフ0 → ゲームオーバー画面
   - 時間切れ → ゲームオーバー画面

### リザルト画面
- クリア時:
  - クリアタイム表示
  - 獲得スコア表示
  - タイムボーナス表示
  - 「NEXT STAGE」ボタン
- ゲームオーバー時:
  - 最終スコア表示
  - 「RETRY」ボタン
  - 「TITLE」ボタン

## 難易度調整要素

以下の要素でステージごとの難易度を調整:
- 敵の配置密度
- プラットフォームの間隔
- コインの配置（取りやすさ）
- 制限時間
- 足場の安定性

## 今後の拡張予定

- パワーアップアイテム
- ボスキャラクター
- 隠し要素・シークレットエリア
- 実績システム
- オンラインランキング