# coin-hunter-adventure-pixel プロジェクトガイド

## 概要

SVGベースの「coin-hunter-adventure」をピクセルアート（Canvas）ベースに移植するプロジェクトです。

## 必須確認資料

### 開発ルール・規約

#### `docs/DEVELOPMENT_RULES.md` - 開発フロー、Git運用、作業手順
- **内容**: Git運用ルール、ブランチ戦略、コミット規約、テスト手順
- **確認タイミング**: 
  - 作業開始前（必須）
  - PRを作成する前
  - テスト・デバッグ方法を確認したいとき

#### `docs/CODING_STANDARDS.md` - コーディング規約、命名規則
- **内容**: 命名規則、コードスタイル、禁止事項、ベストプラクティス
- **確認タイミング**:
  - 新しいファイルを作成するとき
  - 変数や関数の命名に迷ったとき
  - コードレビューの基準を確認したいとき

#### `docs/ARCHITECTURE.md` - システム設計、ディレクトリ構造
- **内容**: ディレクトリ構成、モジュール設計、依存関係、設計思想
- **確認タイミング**:
  - 新機能の設計前
  - ファイルの配置場所に迷ったとき
  - システム全体の構造を理解したいとき

### 仕様書

#### `docs/GAME_SPECIFICATION.md` - ゲーム仕様
- **内容**: ゲームルール、ステージ構成、アイテム効果、操作方法
- **確認タイミング**:
  - ゲームプレイ機能を実装するとき
  - アイテムや敵の動作を実装するとき
  - ゲームバランスを調整するとき

#### `docs/TECHNICAL_SPECIFICATION.md` - 技術仕様
- **内容**: 技術スタック、レンダリング仕様、物理演算、音声システム
- **確認タイミング**:
  - 新しい技術要素を実装するとき
  - パフォーマンス要件を確認したいとき
  - システムの制限事項を確認したいとき

#### `docs/PIXEL_ART_SPECIFICATION.md` - ピクセルアート仕様
- **内容**: スプライトサイズ、カラーパレット、アニメーション仕様、テキスト制限
- **確認タイミング**:
  - 新しいスプライトを作成するとき
  - アニメーションを実装するとき
  - テキスト表示で問題が発生したとき

#### `docs/IMPLEMENTATION_ROADMAP.md` - 実装ロードマップ
- **内容**: フェーズ別の実装計画、優先順位、依存関係
- **確認タイミング**:
  - 次の作業を決めるとき
  - 実装の優先順位を確認したいとき
  - 全体の進捗を把握したいとき

### 状況確認資料

#### `docs/PROJECT_STATUS.md` - 現在の実装状況
- **内容**: 実装済み機能、未実装機能、既知の問題、次の優先事項
- **確認タイミング**:
  - 作業開始時（推奨）
  - 既知の問題を確認したいとき
  - 実装状況を把握したいとき

#### `handover-docs/` - 引き継ぎ資料
- **内容**: 過去の作業詳細、解決した問題、学んだ教訓
- **確認タイミング**:
  - 関連する機能を実装するとき
  - 過去の問題と解決策を参照したいとき
  - 同じ問題を繰り返さないために

## 作業ディレクトリ構成

```
/mnt/d/claude/pixelAction/
├── coin-hunter-adventure-pixel/  # メイン開発（Git管理）
└── old_project_achive/          # 参照用（読み取り専用）
    └── testAction/              # 元プロジェクト（SVG版）
```

## 開発時の重要事項

### 作業開始前に必ず読むドキュメント
1. **このファイル（CLAUDE.md）** - 全体のガイドライン
2. **docs/DEVELOPMENT_RULES.md** - 開発フロー（初回は必須）
3. **docs/PROJECT_STATUS.md** - 現在の状況把握

### 必須作業
1. **TodoList管理** - 作業開始時に必ずTodoListで計画を作成・管理
2. **品質チェック** - 実装後は `npm run lint` でコード品質を確認
3. **動作確認** - 60FPSでの安定動作を確認
4. **内容の検証** - ドキュメントや引き継ぎ内容に疑問がある場合は、実装前に確認
5. **日付の確認** - ファイル作成時は必ず `date` コマンドで現在日付を確認してから命名

### 制限事項
- `old_project_achive/` は参照のみ（編集・コミット禁止）
- 不要なファイル作成を避ける（既存ファイル編集を優先）

### 移植方針
- ゲームロジックは元プロジェクトから再利用
- 描画部分のみCanvas APIに対応
- SVG操作 → Canvas描画への変換に注意

## 開発サーバー

**重要**: サーバー起動はユーザー側で行います（トークン消費を避けるため）

起動コマンド：
```bash
cd /mnt/d/claude/pixelAction/coin-hunter-adventure-pixel
npm run dev
```

アクセスURL: http://localhost:3000/

## 作業開始時の手順

**重要: 以下の手順を必ず順番通りに実行してください**

### 1. 最新の状態を取得
```bash
git checkout main
git pull origin main
```

### 2. GitHub Issueの確認と選択
```bash
gh issue list
gh issue view [選択したIssue番号]
```

### 3. 作業ブランチの作成
```bash
git checkout -b feature/[機能名]
# または
git checkout -b bugfix/[バグ名]
```

### 4. Issueに作業開始をコメント
```bash
gh issue comment [Issue番号] --body "作業を開始します。
ブランチ: feature/[機能名]"
```

### 5. TodoListの作成
作業内容に基づいてTodoWriteツールで作業計画を作成してください。

### 6. プロジェクト状況の確認
必ず以下のドキュメントを確認してください：
- `docs/PROJECT_STATUS.md` - 現在の実装状況と次の作業
- `docs/IMPLEMENTATION_ROADMAP.md` - 全体の実装計画
- `handover-docs/` - 過去の作業履歴と引き継ぎ事項

選択したIssueに関連する機能があれば、該当する仕様書も確認してください。

## システムの重要な制限事項

### テキスト表示
- **大文字英語のみ対応**（A-Z, 0-9, 一部記号）
- 日本語、小文字は表示不可
- 詳細は `docs/PIXEL_ART_SPECIFICATION.md` の「テキスト表示の制限」を参照

### レンダリング
- PixelRendererのメソッドを使用すること（drawRect, setCamera等）
- 直接ctx操作は避ける（スケーリングが適用されない）

## トラブルシューティング

具体的な問題と解決方法については以下を参照してください：
- `docs/PROJECT_STATUS.md` - 既知の問題と対処法
- `handover-docs/` - 過去に発生した問題と解決履歴

## ClaudeとGeminiの協業ルール

### 引き継ぎドキュメントの運用

作業の引き継ぎは `handover-docs/` ディレクトリで管理します。

#### ディレクトリ構成
```
handover-docs/
├── README.md                 # 引き継ぎ管理の説明
├── templates/               # テンプレート
│   ├── handover-template.md # 実装引き継ぎ用
│   └── review-template.md   # レビュー結果用
├── claude-to-gemini/        # Claude → Gemini
└── gemini-to-claude/        # Gemini → Claude
```

#### 引き継ぎフロー

1. **Claude → Gemini（実装完了時）**
   - `claude-to-gemini/YYYY-MM-DD_機能名.md` を作成
   - `handover-template.md` を使用して記載
   - 実装内容、テスト手順、レビュー依頼事項を明記

2. **Gemini → Claude（レビュー完了時）**
   - `gemini-to-claude/YYYY-MM-DD_機能名_review.md` を作成
   - `review-template.md` を使用して記載
   - テスト結果、問題点、改善案を明記

#### 重要なポイント

- **日付の確認**: ファイル作成前に `date` コマンドで現在日付を確認
- **詳細な記載**: 次の作業者がスムーズに作業できるよう詳細に記載
- **問題の共有**: 発見した問題は優先度を付けて明確に記載
- **学びの共有**: 技術的な発見や改善案は積極的に共有

## 継続的改善のルール

### 積極的な提案を歓迎します

作業中に以下のような気づきがあれば、遠慮なく提案してください：

#### 1. 開発効率の改善
- より良いツールやライブラリの提案
- 繰り返し作業の自動化アイデア
- テスト方法の改善案
- デバッグ効率を上げる方法

#### 2. コード品質の向上
- より読みやすいコード構造の提案
- パフォーマンス最適化のアイデア
- エラーハンドリングの改善
- 技術的負債の解消方法

#### 3. ドキュメントの改善
- 説明が不足している部分の指摘
- より分かりやすい書き方の提案
- 新しいドキュメントの必要性
- 既存ドキュメントの統廃合案

#### 4. プロジェクト運営の改善
- Git運用フローの最適化
- Issue管理の改善案
- コミュニケーション方法の提案
- 作業プロセスの効率化

### 改善提案の方法

1. **小さな改善は即実行**
   - 明らかな改善は実装と同時に行う
   - ドキュメントの誤字修正なども積極的に

2. **大きな改善は相談**
   - アーキテクチャ変更など影響が大きい場合は提案として記載
   - 引き継ぎ資料に「改善提案」セクションを設ける

3. **実験的な試み**
   - 新しいアプローチを試すことを推奨
   - 失敗しても学びとして記録

### 改善の記録

- 実施した改善は引き継ぎ資料に記載
- 他の開発者も恩恵を受けられるように
- 「なぜその改善を行ったか」も明記

### 心構え

**「こうした方が良いのでは？」と思ったら、それは貴重な改善の機会です。**
- 現状に満足せず、常により良い方法を探す
- 小さな改善の積み重ねがプロジェクトを進化させる
- あなたの視点が新しい価値を生み出す