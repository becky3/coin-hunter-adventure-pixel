[LOG] Log file created: /mnt/d/claude/pixelAction/coin-hunter-adventure-pixel/tests/e2e/tests/logs/stage-0-4-enemy-spawn-test-2025-07-12_20-23-53-JST.log
[LOG] 
==================================================
[LOG] Starting test: Stage 0-4 Enemy Spawn Test
[LOG] Time: 2025-07-12_20-23-53-JST (JST)
[LOG] ==================================================

[LOG] Test timeout set to: 60000ms
[LOG] ðŸ’‰ Error tracking injected
[LOG] Navigating to: http://localhost:3000?s=0-4
[LOG] [Browser Console debug] [vite] connecting...
[LOG] [Browser Console log] [20:23:56.348] Starting game initialization...
[LOG] [Browser Console log] [20:23:56.348] Initializing GameCore...
[LOG] [Browser Console log] [20:23:56.348] GameCore: init() started
[LOG] [Browser Console log] [20:23:56.348] GameCore: Initializing ResourceLoader...
[LOG] [Browser Console log] [20:23:56.349] [ResourceLoader] Using bundled data for: /src/config/resources/index.json
[LOG] [Browser Console log] [20:23:56.349] [ResourceLoader] Using bundled data for: /src/config/resources/sprites.json
[LOG] [Browser Console log] [20:23:56.349] [ResourceLoader] Using bundled data for: /src/config/resources/characters.json
[LOG] [Browser Console log] [20:23:56.349] [ResourceLoader] Using bundled data for: /src/config/resources/audio.json
[LOG] [Browser Console log] [20:23:56.349] [ResourceLoader] Using bundled data for: /src/config/resources/objects.json
[LOG] [Browser Console log] [20:23:56.349] [ResourceLoader] Using bundled data for: /src/config/resources/bgm/title.json
[LOG] [Browser Console log] [20:23:56.349] [ResourceLoader] Using bundled data for: /src/config/resources/physics.json
[LOG] [Browser Console log] [20:23:56.349] [ResourceLoader] Using bundled data for: /src/config/resources/bgm/game.json
[LOG] [Browser Console log] [20:23:56.350] [ResourceLoader] Using bundled data for: /src/config/resources/bgm/victory.json
[LOG] [Browser Console log] [20:23:56.350] [ResourceLoader] Using bundled data for: /src/config/resources/bgm/gameover.json
[LOG] [Browser Console log] [20:23:56.350] [ResourceLoader] Using bundled data for: /src/config/resources/se/coin.json
[LOG] [Browser Console log] [20:23:56.350] [ResourceLoader] Using bundled data for: /src/config/resources/se/jump.json
[LOG] [Browser Console log] [20:23:56.350] [ResourceLoader] Using bundled data for: /src/config/resources/se/damage.json
[LOG] [Browser Console log] [20:23:56.350] [ResourceLoader] Using bundled data for: /src/config/resources/se/button.json
[LOG] [Browser Console log] [20:23:56.350] [ResourceLoader] Using bundled data for: /src/config/resources/se/gameStart.json
[LOG] [Browser Console log] [20:23:56.350] [ResourceLoader] Using bundled data for: /src/config/resources/se/goal.json
[LOG] [Browser Console log] [20:23:56.350] [ResourceLoader] Using bundled data for: /src/config/resources/se/enemyDefeat.json
[LOG] [Browser Console log] [20:23:56.350] GameCore: Registering core services...
[LOG] [Browser Console log] [20:23:56.351] [PhysicsSystem] Initialized with:
[LOG] [Browser Console log] [20:23:56.351]   - Gravity: 0.65
[LOG] [Browser Console log] [20:23:56.351]   - Max fall speed: 15
[LOG] [Browser Console log] [20:23:56.351]   - Friction: 0.8
[LOG] [Browser Console log] [20:23:56.351] GameCore: Registering systems...
[LOG] [Browser Console log] [20:23:56.352] GameCore: Initializing MusicSystem...
[LOG] [Browser Console log] [20:23:56.352] MusicSystem: init() called
[LOG] [Browser Console log] [20:23:56.417] MusicSystem: AudioContext created
[LOG] [Browser Console log] [20:23:56.418] MusicSystem: AudioContext is suspended, attempting to resume...
[LOG] [Browser Console warn] The AudioContext was not allowed to start. It must be resumed (or created) after a user gesture on the page. https://developer.chrome.com/blog/autoplay/#web_audio
[LOG] âœ… Page loaded
[LOG] Waiting for game initialization...
[LOG] [Browser Console debug] [vite] connected.
[LOG] Game object exists: true
[LOG] [Browser Console warn] [20:24:01.418] GameCore: MusicSystem initialization failed, continuing without audio: JSHandle@error
[LOG] [Browser Console log] [20:24:01.419] GameCore: Registering states...
[LOG] [Browser Console log] [20:24:01.419] GameCore: Initializing debug overlay...
[LOG] [Browser Console log] [20:24:01.421] EnemySpawnDialog Initialized
[LOG] [Browser Console log] [20:24:01.421] DebugOverlay Initialized with stage: stage0-4 (index: 6)
[LOG] [Browser Console log] [20:24:01.421] GameCore: Hiding loading screen...
[LOG] [Browser Console log] [20:24:01.421] GameCore: init() completed
[LOG] [Browser Console log] [20:24:01.421] Starting game loop...
[LOG] [Browser Console log] [20:24:01.421] GameCore: Starting game loop...
[LOG] [Browser Console log] [20:24:01.422] GameCore: Game loop started, running: true
[LOG] [Browser Console log] [20:24:01.422] GameCore: Initial state set to menu
[LOG] [Browser Console log] [20:24:01.422] Game started successfully
[LOG] âœ… Game initialized
[LOG] Starting new game...
[LOG] Waiting for state: menu...
[LOG] âœ… State changed to: menu
[LOG] Waiting for menu to appear...
[LOG] Waiting for menu fade in...
[LOG] [Browser Console log] [20:24:01.450] InputSystemAdapter: update called
[LOG] [Browser Console log] [20:24:01.451] MenuState update called, optionsAlpha: 0
[LOG] âœ… menu fade in met
[LOG] Clicking at: (100, 100)
[LOG] Pressing key: Space (down/up with delay)
[LOG] [Browser Console log] [20:24:02.835] InputSystem: Space key pressed, actions: JSHandle@array
[LOG] [Browser Console log] [20:24:02.837] MenuState Starting stage: stage0-4 (source: debug overlay
[LOG] [Browser Console log] [20:24:02.838] [PlayState] enter() called with params: JSHandle@object
[LOG] [Browser Console log] [20:24:02.838] [PlayState] Starting initialization...
[LOG] [Browser Console log] [20:24:02.838] [PlayState] Checking/loading sprites...
[LOG] [Browser Console log] [20:24:02.838] [SpriteLoader] Using bundled data for: player/idle
[LOG] [Browser Console log] [20:24:02.839] [SpriteLoader] Using bundled data for: player/walk1
[LOG] [Browser Console log] [20:24:02.839] [SpriteLoader] Using bundled data for: player/jump1
[LOG] [Browser Console log] [20:24:02.839] [SpriteLoader] Using bundled data for: player/idle_small
[LOG] [Browser Console log] [20:24:02.839] [SpriteLoader] Using bundled data for: player/walk_small1
[LOG] [Browser Console log] [20:24:02.839] [SpriteLoader] Using bundled data for: player/jump_small1
[LOG] [Browser Console log] [20:24:02.839] [SpriteLoader] Using bundled data for: terrain/spring
[LOG] [Browser Console log] [20:24:02.839] [SpriteLoader] Using bundled data for: terrain/goal_flag
[LOG] [Browser Console log] [20:24:02.839] [SpriteLoader] Using bundled data for: items/coin_spin1
[LOG] [Browser Console log] [20:24:02.839] [SpriteLoader] Using bundled data for: enemies/slime_idle1
[LOG] [Browser Console log] [20:24:02.840] [SpriteLoader] Using bundled data for: enemies/bird_fly1
[LOG] [Browser Console log] [20:24:02.840] [SpriteLoader] Using bundled data for: environment/cloud1
[LOG] [Browser Console log] [20:24:02.840] [SpriteLoader] Using bundled data for: environment/cloud2
[LOG] [Browser Console log] [20:24:02.840] [SpriteLoader] Using bundled data for: environment/tree1
[LOG] [Browser Console log] [20:24:02.840] [SpriteLoader] Using bundled data for: tiles/ground
[LOG] [Browser Console log] [20:24:02.840] [SpriteLoader] Using bundled data for: tiles/grass_ground
[LOG] [Browser Console log] [20:24:02.841] [AssetLoader] Loaded sprite player/idle in 2.40ms
[LOG] [Browser Console log] [20:24:02.841] [SpriteLoader] Using bundled data for: player/walk2
[LOG] [Browser Console log] [20:24:02.841] [SpriteLoader] Using bundled data for: player/jump2
[LOG] [Browser Console log] [20:24:02.841] [AssetLoader] Loaded sprite player/idle_small in 2.00ms
[LOG] [Browser Console log] [20:24:02.841] [SpriteLoader] Using bundled data for: player/walk_small2
[LOG] [Browser Console log] [20:24:02.841] [SpriteLoader] Using bundled data for: player/jump_small2
[LOG] [Browser Console log] [20:24:02.842] [AssetLoader] Loaded sprite terrain/spring in 2.50ms
[LOG] [Browser Console log] [20:24:02.842] [AssetLoader] Loaded sprite terrain/goal_flag in 2.60ms
[LOG] [Browser Console log] [20:24:02.842] [SpriteLoader] Using bundled data for: items/coin_spin2
[LOG] [Browser Console log] [20:24:02.842] [SpriteLoader] Using bundled data for: enemies/slime_idle2
[LOG] [Browser Console log] [20:24:02.842] [SpriteLoader] Using bundled data for: enemies/bird_fly2
[LOG] [Browser Console log] [20:24:02.843] [AssetLoader] Loaded sprite environment/cloud1 in 2.90ms
[LOG] [Browser Console log] [20:24:02.843] [AssetLoader] Loaded sprite environment/cloud2 in 3.50ms
[LOG] [Browser Console log] [20:24:02.844] [AssetLoader] Loaded sprite environment/tree1 in 4.20ms
[LOG] [Browser Console log] [20:24:02.844] [AssetLoader] Loaded sprite tiles/ground in 4.40ms
[LOG] [Browser Console log] [20:24:02.845] [AssetLoader] Loaded sprite tiles/grass_ground in 4.70ms
[LOG] [Browser Console log] [20:24:02.845] [SpriteLoader] Using bundled data for: player/walk3
[LOG] [Browser Console log] [20:24:02.846] [AssetLoader] Loaded animation player/jump (2 frames) in 6.50ms
[LOG] [Browser Console log] [20:24:02.846] [SpriteLoader] Using bundled data for: player/walk_small3
[LOG] [Browser Console log] [20:24:02.846] [AssetLoader] Loaded animation player/jump_small (2 frames) in 7.00ms
[LOG] [Browser Console log] [20:24:02.846] [SpriteLoader] Using bundled data for: items/coin_spin3
[LOG] [Browser Console log] [20:24:02.847] [AssetLoader] Loaded animation enemies/slime_idle (2 frames) in 7.20ms
[LOG] [Browser Console log] [20:24:02.847] [AssetLoader] Loaded animation enemies/bird_fly (2 frames) in 7.60ms
[LOG] [Browser Console log] [20:24:02.847] [SpriteLoader] Using bundled data for: player/walk4
[LOG] [Browser Console log] [20:24:02.847] [SpriteLoader] Using bundled data for: player/walk_small4
[LOG] [Browser Console log] [20:24:02.847] [SpriteLoader] Using bundled data for: items/coin_spin4
[LOG] [Browser Console log] [20:24:02.848] [AssetLoader] Loaded animation player/walk (4 frames) in 9.50ms
[LOG] [Browser Console log] [20:24:02.849] [AssetLoader] Loaded animation player/walk_small (4 frames) in 9.70ms
[LOG] [Browser Console log] [20:24:02.849] [AssetLoader] Loaded animation items/coin_spin (4 frames) in 9.90ms
[LOG] [Browser Console log] [20:24:02.849] [PlayState] Sprites loaded successfully in 11.40ms
[LOG] [Browser Console log] [20:24:02.850] [AssetLoader] Stage type set to: grassland
[LOG] [Browser Console log] [20:24:02.850] [LevelLoader] Using bundled data for: /src/levels/data/stages.json
[LOG] Waiting for state: play...
[LOG] âœ… State changed to: play
[LOG] Waiting for PlayState ready...
[LOG] [Browser Console log] [20:24:04.042] [LevelLoader] Fetched /src/levels/data/stage0-4.json in 1191.70ms
[LOG] [Browser Console log] [20:24:04.043] [EntityManager] Creating player at (32, 192)
[LOG] [Browser Console log] [20:24:04.044] [Player] Jump Configuration Debug:
[LOG] [Browser Console log] [20:24:04.044]   - Config source: physics.json
[LOG] [Browser Console log] [20:24:04.044]   - jumpPower: 10
[LOG] [Browser Console log] [20:24:04.044]   - variableJumpBoost: 
[LOG] [Browser Console log] [20:24:04.044]   - variableJumpBoostMultiplier: 
[LOG] [Browser Console log] [20:24:04.044]   - minJumpTime: 0
[LOG] [Browser Console log] [20:24:04.044]   - maxJumpTime: 400
[LOG] [Browser Console log] [20:24:04.044]   - airResistance: 0
[LOG] [Browser Console log] [20:24:04.044]   - gravityScale: 1
[LOG] [Browser Console log] [20:24:04.044]   - maxFallSpeed: 10
[LOG] [Browser Console log] [20:24:04.044] [EntityManager] Player created: success
[LOG] [Browser Console log] [20:24:04.045] [PlayState] levelData: JSHandle@object
[LOG] [Browser Console log] [20:24:04.045] [PlayState] levelData.name: ENEMY DEMO
[LOG] [Browser Console log] [20:24:04.045] [PlayState] Stage name set to: ENEMY DEMO
[LOG] [Browser Console log] [20:24:04.045] [PlayState] MusicSystem status: JSHandle@object
[LOG] [Browser Console log] [20:24:04.046] [PlayState] Player created successfully
[LOG] [Browser Console log] PlayState ready event received: JSHandle@object
[LOG] [Browser Console log] [20:24:04.046] [PlayState] enter() completed in 1208.20ms
[LOG] âœ… PlayState ready met
[LOG] âœ… New game started and ready
[LOG] âœ… Assert: Player exists
[LOG] âœ… Stage 0-4 loaded successfully
[LOG] Opening enemy spawn dialog...
[LOG] âœ… Enemy spawn dialog opened
[LOG] Clicking SLIME button...
[LOG] [Browser Console log] [20:24:07.070] EntityManager Spawning slime at tile (7, 7) -> pixel (112, 112)
[LOG] [Browser Console log] [20:24:07.070] Enemy Created at x=112, y=112
[LOG] [Browser Console log] [20:24:07.071] EntityManager Successfully spawned slime
[LOG] [Browser Console log] [20:24:07.071] EnemySpawnDialog Spawned slime at (7, 7)
[LOG] Enemy info: [object Object]
[LOG] âœ… Enemy spawned successfully!
[LOG]   Enemies: [object Object]
[LOG] 
Monitoring slime position...
[LOG] [1s] Enemies: {"enemies":[{"type":"Slime","x":162,"y":192,"vx":"0.25","vy":"0.00","grounded":true,"active":true,"width":16,"height":16,"physicsLayer":"enemy"}],"tileMapExists":false,"levelTileMap":true}
[LOG] [2s] Enemies: {"enemies":[{"type":"Slime","x":189,"y":192,"vx":"0.25","vy":"0.00","grounded":true,"active":true,"width":16,"height":16,"physicsLayer":"enemy"}],"tileMapExists":false,"levelTileMap":true}
[LOG] [3s] Enemies: {"enemies":[{"type":"Slime","x":217,"y":192,"vx":"0.25","vy":"0.00","grounded":true,"active":true,"width":16,"height":16,"physicsLayer":"enemy"}],"tileMapExists":false,"levelTileMap":true}
[LOG] [4s] Enemies: {"enemies":[{"type":"Slime","x":244,"y":192,"vx":"0.25","vy":"0.00","grounded":true,"active":true,"width":16,"height":16,"physicsLayer":"enemy"}],"tileMapExists":false,"levelTileMap":true}
[LOG] [5s] Enemies: {"enemies":[{"type":"Slime","x":271,"y":192,"vx":"0.25","vy":"0.00","grounded":true,"active":true,"width":16,"height":16,"physicsLayer":"enemy"}],"tileMapExists":false,"levelTileMap":true}
[LOG] [6s] Enemies: {"enemies":[{"type":"Slime","x":298,"y":192,"vx":"0.25","vy":"0.00","grounded":true,"active":true,"width":16,"height":16,"physicsLayer":"enemy"}],"tileMapExists":false,"levelTileMap":true}
[LOG] [7s] Enemies: {"enemies":[{"type":"Slime","x":325,"y":192,"vx":"0.25","vy":"0.00","grounded":true,"active":true,"width":16,"height":16,"physicsLayer":"enemy"}],"tileMapExists":false,"levelTileMap":true}
[LOG] [8s] Enemies: {"enemies":[{"type":"Slime","x":352,"y":192,"vx":"0.25","vy":"0.00","grounded":true,"active":true,"width":16,"height":16,"physicsLayer":"enemy"}],"tileMapExists":false,"levelTileMap":true}
[LOG] [9s] Enemies: {"enemies":[{"type":"Slime","x":379,"y":192,"vx":"0.25","vy":"0.00","grounded":true,"active":true,"width":16,"height":16,"physicsLayer":"enemy"}],"tileMapExists":false,"levelTileMap":true}
[LOG] [10s] Enemies: {"enemies":[{"type":"Slime","x":406,"y":192,"vx":"0.25","vy":"0.00","grounded":true,"active":true,"width":16,"height":16,"physicsLayer":"enemy"}],"tileMapExists":false,"levelTileMap":true}
[LOG] âœ… No errors detected
[LOG] âœ… Test completed
[LOG] 
âœ… TEST PASSED

[LOG] 
==================================================
[LOG] Test completed in: 24.90s
[LOG] ==================================================

