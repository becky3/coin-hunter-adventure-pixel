[LOG] Log file created: /mnt/d/claude/pixelAction/coin-hunter-adventure-pixel/tests/e2e/tests/logs/stage-0-4-enemy-spawn-test-2025-07-12_20-28-40-JST.log
[LOG] 
==================================================
[LOG] Starting test: Stage 0-4 Enemy Spawn Test
[LOG] Time: 2025-07-12_20-28-40-JST (JST)
[LOG] ==================================================

[LOG] Test timeout set to: 60000ms
[LOG] ðŸ’‰ Error tracking injected
[LOG] Navigating to: http://localhost:3000?s=0-4&skip_title=true
[LOG] [Browser Console debug] [vite] connecting...
[LOG] [Browser Console log] [20:28:44.689] Starting game initialization...
[LOG] [Browser Console log] [20:28:44.692] Initializing GameCore...
[LOG] [Browser Console log] [20:28:44.692] GameCore: init() started
[LOG] [Browser Console log] [20:28:44.692] GameCore: Initializing ResourceLoader...
[LOG] [Browser Console log] [20:28:44.692] [ResourceLoader] Using bundled data for: /src/config/resources/index.json
[LOG] [Browser Console log] [20:28:44.693] [ResourceLoader] Using bundled data for: /src/config/resources/sprites.json
[LOG] [Browser Console log] [20:28:44.693] [ResourceLoader] Using bundled data for: /src/config/resources/characters.json
[LOG] [Browser Console log] [20:28:44.693] [ResourceLoader] Using bundled data for: /src/config/resources/audio.json
[LOG] [Browser Console log] [20:28:44.693] [ResourceLoader] Using bundled data for: /src/config/resources/objects.json
[LOG] [Browser Console log] [20:28:44.693] [ResourceLoader] Using bundled data for: /src/config/resources/bgm/title.json
[LOG] [Browser Console log] [20:28:44.693] [ResourceLoader] Using bundled data for: /src/config/resources/physics.json
[LOG] [Browser Console log] [20:28:44.693] [ResourceLoader] Using bundled data for: /src/config/resources/bgm/game.json
[LOG] [Browser Console log] [20:28:44.693] [ResourceLoader] Using bundled data for: /src/config/resources/bgm/victory.json
[LOG] [Browser Console log] [20:28:44.693] [ResourceLoader] Using bundled data for: /src/config/resources/bgm/gameover.json
[LOG] [Browser Console log] [20:28:44.693] [ResourceLoader] Using bundled data for: /src/config/resources/se/coin.json
[LOG] [Browser Console log] [20:28:44.693] [ResourceLoader] Using bundled data for: /src/config/resources/se/jump.json
[LOG] [Browser Console log] [20:28:44.694] [ResourceLoader] Using bundled data for: /src/config/resources/se/damage.json
[LOG] [Browser Console log] [20:28:44.694] [ResourceLoader] Using bundled data for: /src/config/resources/se/button.json
[LOG] [Browser Console log] [20:28:44.694] [ResourceLoader] Using bundled data for: /src/config/resources/se/gameStart.json
[LOG] [Browser Console log] [20:28:44.694] [ResourceLoader] Using bundled data for: /src/config/resources/se/goal.json
[LOG] [Browser Console log] [20:28:44.694] [ResourceLoader] Using bundled data for: /src/config/resources/se/enemyDefeat.json
[LOG] [Browser Console log] [20:28:44.694] GameCore: Registering core services...
[LOG] [Browser Console log] [20:28:44.697] [PhysicsSystem] Initialized with:
[LOG] [Browser Console log] [20:28:44.698]   - Gravity: 0.65
[LOG] [Browser Console log] [20:28:44.698]   - Max fall speed: 15
[LOG] [Browser Console log] [20:28:44.698]   - Friction: 0.8
[LOG] [Browser Console log] [20:28:44.698] GameCore: Registering systems...
[LOG] [Browser Console log] [20:28:44.700] GameCore: Initializing MusicSystem...
[LOG] [Browser Console log] [20:28:44.700] MusicSystem: init() called
[LOG] [Browser Console log] [20:28:44.768] MusicSystem: AudioContext created
[LOG] [Browser Console log] [20:28:44.769] MusicSystem: AudioContext is suspended, attempting to resume...
[LOG] [Browser Console warn] The AudioContext was not allowed to start. It must be resumed (or created) after a user gesture on the page. https://developer.chrome.com/blog/autoplay/#web_audio
[LOG] âœ… Page loaded
[LOG] Waiting for game initialization...
[LOG] Game object exists: true
[LOG] [Browser Console debug] [vite] connected.
[LOG] [Browser Console warn] [20:28:49.770] GameCore: MusicSystem initialization failed, continuing without audio: JSHandle@error
[LOG] [Browser Console log] [20:28:49.771] GameCore: Registering states...
[LOG] [Browser Console log] [20:28:49.772] GameCore: Initializing debug overlay...
[LOG] [Browser Console log] [20:28:49.775] EnemySpawnDialog Initialized
[LOG] [Browser Console log] [20:28:49.776] DebugOverlay Initialized with stage: stage0-4 (index: 6)
[LOG] [Browser Console log] [20:28:49.776] GameCore: Hiding loading screen...
[LOG] [Browser Console log] [20:28:49.776] GameCore: init() completed
[LOG] [Browser Console log] [20:28:49.776] Starting game loop...
[LOG] [Browser Console log] [20:28:49.776] GameCore: Starting game loop...
[LOG] [Browser Console log] [20:28:49.776] GameCore: Game loop started, running: true
[LOG] [Browser Console log] [20:28:49.776] GameCore: Skipping title, starting directly with stage: stage0-4
[LOG] [Browser Console log] [20:28:49.777] [PlayState] enter() called with params: JSHandle@object
[LOG] [Browser Console log] [20:28:49.777] [PlayState] Starting initialization...
[LOG] [Browser Console log] [20:28:49.777] [PlayState] Checking/loading sprites...
[LOG] [Browser Console log] [20:28:49.777] [SpriteLoader] Using bundled data for: player/idle
[LOG] [Browser Console log] [20:28:49.778] [SpriteLoader] Using bundled data for: player/walk1
[LOG] [Browser Console log] [20:28:49.778] [SpriteLoader] Using bundled data for: player/jump1
[LOG] [Browser Console log] [20:28:49.778] [SpriteLoader] Using bundled data for: player/idle_small
[LOG] [Browser Console log] [20:28:49.778] [SpriteLoader] Using bundled data for: player/walk_small1
[LOG] [Browser Console log] [20:28:49.778] [SpriteLoader] Using bundled data for: player/jump_small1
[LOG] [Browser Console log] [20:28:49.778] [SpriteLoader] Using bundled data for: terrain/spring
[LOG] [Browser Console log] [20:28:49.778] [SpriteLoader] Using bundled data for: terrain/goal_flag
[LOG] [Browser Console log] [20:28:49.778] [SpriteLoader] Using bundled data for: items/coin_spin1
[LOG] [Browser Console log] [20:28:49.778] [SpriteLoader] Using bundled data for: enemies/slime_idle1
[LOG] [Browser Console log] [20:28:49.778] [SpriteLoader] Using bundled data for: enemies/bird_fly1
[LOG] [Browser Console log] [20:28:49.778] [SpriteLoader] Using bundled data for: environment/cloud1
[LOG] [Browser Console log] [20:28:49.779] [SpriteLoader] Using bundled data for: environment/cloud2
[LOG] [Browser Console log] [20:28:49.779] [SpriteLoader] Using bundled data for: environment/tree1
[LOG] [Browser Console log] [20:28:49.779] [SpriteLoader] Using bundled data for: tiles/ground
[LOG] [Browser Console log] [20:28:49.779] [SpriteLoader] Using bundled data for: tiles/grass_ground
[LOG] [Browser Console log] [20:28:49.779] Game started successfully
[LOG] [Browser Console log] [20:28:49.781] [AssetLoader] Loaded sprite player/idle in 3.60ms
[LOG] [Browser Console log] [20:28:49.781] [SpriteLoader] Using bundled data for: player/walk2
[LOG] [Browser Console log] [20:28:49.781] [SpriteLoader] Using bundled data for: player/jump2
[LOG] [Browser Console log] [20:28:49.781] [AssetLoader] Loaded sprite player/idle_small in 3.40ms
[LOG] [Browser Console log] [20:28:49.781] [SpriteLoader] Using bundled data for: player/walk_small2
[LOG] [Browser Console log] [20:28:49.782] [SpriteLoader] Using bundled data for: player/jump_small2
[LOG] [Browser Console log] [20:28:49.782] [AssetLoader] Loaded sprite terrain/spring in 3.90ms
[LOG] [Browser Console log] [20:28:49.782] [AssetLoader] Loaded sprite terrain/goal_flag in 4.00ms
[LOG] [Browser Console log] [20:28:49.782] [SpriteLoader] Using bundled data for: items/coin_spin2
[LOG] [Browser Console log] [20:28:49.783] [SpriteLoader] Using bundled data for: enemies/slime_idle2
[LOG] [Browser Console log] [20:28:49.783] [SpriteLoader] Using bundled data for: enemies/bird_fly2
[LOG] [Browser Console log] [20:28:49.783] [AssetLoader] Loaded sprite environment/cloud1 in 4.70ms
[LOG] [Browser Console log] [20:28:49.784] [AssetLoader] Loaded sprite environment/cloud2 in 5.30ms
[LOG] [Browser Console log] [20:28:49.785] [AssetLoader] Loaded sprite environment/tree1 in 6.10ms
[LOG] [Browser Console log] [20:28:49.785] [AssetLoader] Loaded sprite tiles/ground in 6.30ms
[LOG] [Browser Console log] [20:28:49.785] [AssetLoader] Loaded sprite tiles/grass_ground in 6.70ms
[LOG] [Browser Console log] [20:28:49.786] [SpriteLoader] Using bundled data for: player/walk3
[LOG] [Browser Console log] [20:28:49.786] [AssetLoader] Loaded animation player/jump (2 frames) in 8.60ms
[LOG] [Browser Console log] [20:28:49.786] [SpriteLoader] Using bundled data for: player/walk_small3
[LOG] [Browser Console log] [20:28:49.787] [AssetLoader] Loaded animation player/jump_small (2 frames) in 8.80ms
[LOG] [Browser Console log] [20:28:49.787] [SpriteLoader] Using bundled data for: items/coin_spin3
[LOG] [Browser Console log] [20:28:49.788] [AssetLoader] Loaded animation enemies/slime_idle (2 frames) in 9.60ms
[LOG] [Browser Console log] [20:28:49.788] [AssetLoader] Loaded animation enemies/bird_fly (2 frames) in 9.80ms
[LOG] [Browser Console log] [20:28:49.788] [SpriteLoader] Using bundled data for: player/walk4
[LOG] [Browser Console log] [20:28:49.789] [SpriteLoader] Using bundled data for: player/walk_small4
[LOG] [Browser Console log] [20:28:49.789] [SpriteLoader] Using bundled data for: items/coin_spin4
[LOG] [Browser Console log] [20:28:49.789] [AssetLoader] Loaded animation player/walk (4 frames) in 11.70ms
[LOG] [Browser Console log] [20:28:49.790] [AssetLoader] Loaded animation player/walk_small (4 frames) in 12.10ms
[LOG] [Browser Console log] [20:28:49.791] [AssetLoader] Loaded animation items/coin_spin (4 frames) in 12.40ms
[LOG] [Browser Console log] [20:28:49.791] [PlayState] Sprites loaded successfully in 13.80ms
[LOG] [Browser Console log] [20:28:49.791] [AssetLoader] Stage type set to: grassland
[LOG] [Browser Console log] [20:28:49.791] [LevelLoader] Using bundled data for: /src/levels/data/stages.json
[LOG] âœ… Game initialized
[LOG] [Browser Console log] [TestFramework] Player not found. Debug info: JSHandle@object
[LOG] âœ… Assert: Current state is 'play'
[LOG] Clicking at: (100, 100)
[LOG] [Browser Console log] [20:28:49.803] InputSystemAdapter: update called
[LOG] [Browser Console log] [20:28:51.144] [LevelLoader] Fetched /src/levels/data/stage0-4.json in 1352.20ms
[LOG] [Browser Console log] [20:28:51.145] [EntityManager] Creating player at (32, 192)
[LOG] [Browser Console log] [20:28:51.145] [Player] Jump Configuration Debug:
[LOG] [Browser Console log] [20:28:51.146]   - Config source: physics.json
[LOG] [Browser Console log] [20:28:51.146]   - jumpPower: 10
[LOG] [Browser Console log] [20:28:51.146]   - variableJumpBoost: 
[LOG] [Browser Console log] [20:28:51.146]   - variableJumpBoostMultiplier: 
[LOG] [Browser Console log] [20:28:51.146]   - minJumpTime: 0
[LOG] [Browser Console log] [20:28:51.146]   - maxJumpTime: 400
[LOG] [Browser Console log] [20:28:51.146]   - airResistance: 0
[LOG] [Browser Console log] [20:28:51.146]   - gravityScale: 1
[LOG] [Browser Console log] [20:28:51.146]   - maxFallSpeed: 10
[LOG] [Browser Console log] [20:28:51.146] [EntityManager] Player created: success
[LOG] [Browser Console log] [20:28:51.147] [PlayState] levelData: JSHandle@object
[LOG] [Browser Console log] [20:28:51.147] [PlayState] levelData.name: ENEMY DEMO
[LOG] [Browser Console log] [20:28:51.147] [PlayState] Stage name set to: ENEMY DEMO
[LOG] [Browser Console log] [20:28:51.147] [PlayState] MusicSystem status: JSHandle@object
[LOG] [Browser Console log] [20:28:51.147] [PlayState] Player created successfully
[LOG] [Browser Console log] [20:28:51.148] [PlayState] enter() completed in 1371.50ms
[LOG] âœ… Assert: Player exists
[LOG] âœ… Stage 0-4 loaded successfully
[LOG] Opening enemy spawn dialog...
[LOG] âœ… Enemy spawn dialog opened
[LOG] Clicking SLIME button...
[LOG] [Browser Console log] [20:28:54.846] EntityManager Spawning slime at tile (7, 7) -> pixel (112, 112)
[LOG] [Browser Console log] [20:28:54.847] Enemy Created at x=112, y=112
[LOG] [Browser Console log] [20:28:54.847] EntityManager Successfully spawned slime
[LOG] [Browser Console log] [20:28:54.847] EnemySpawnDialog Spawned slime at (7, 7)
[LOG] Enemy info: [object Object]
[LOG] âœ… Enemy spawned successfully!
[LOG]   Enemies: [object Object]
[LOG] 
Monitoring slime position...
[LOG] [1s] Enemies: {"enemies":[{"type":"Slime","x":162,"y":192,"vx":"0.25","vy":"0.00","grounded":true,"active":true,"width":16,"height":16,"physicsLayer":"enemy"}],"tileMapExists":false,"levelTileMap":true}
[LOG] [2s] Enemies: {"enemies":[{"type":"Slime","x":189,"y":192,"vx":"0.25","vy":"0.00","grounded":true,"active":true,"width":16,"height":16,"physicsLayer":"enemy"}],"tileMapExists":false,"levelTileMap":true}
[LOG] [3s] Enemies: {"enemies":[{"type":"Slime","x":216,"y":192,"vx":"0.25","vy":"0.00","grounded":true,"active":true,"width":16,"height":16,"physicsLayer":"enemy"}],"tileMapExists":false,"levelTileMap":true}
[LOG] [4s] Enemies: {"enemies":[{"type":"Slime","x":244,"y":192,"vx":"0.25","vy":"0.00","grounded":true,"active":true,"width":16,"height":16,"physicsLayer":"enemy"}],"tileMapExists":false,"levelTileMap":true}
[LOG] [5s] Enemies: {"enemies":[{"type":"Slime","x":271,"y":192,"vx":"0.25","vy":"0.00","grounded":true,"active":true,"width":16,"height":16,"physicsLayer":"enemy"}],"tileMapExists":false,"levelTileMap":true}
[LOG] [6s] Enemies: {"enemies":[{"type":"Slime","x":298,"y":192,"vx":"0.25","vy":"0.00","grounded":true,"active":true,"width":16,"height":16,"physicsLayer":"enemy"}],"tileMapExists":false,"levelTileMap":true}
[LOG] [7s] Enemies: {"enemies":[{"type":"Slime","x":325,"y":192,"vx":"0.25","vy":"0.00","grounded":true,"active":true,"width":16,"height":16,"physicsLayer":"enemy"}],"tileMapExists":false,"levelTileMap":true}
[LOG] [8s] Enemies: {"enemies":[{"type":"Slime","x":352,"y":192,"vx":"0.25","vy":"0.00","grounded":true,"active":true,"width":16,"height":16,"physicsLayer":"enemy"}],"tileMapExists":false,"levelTileMap":true}
[LOG] [9s] Enemies: {"enemies":[{"type":"Slime","x":379,"y":192,"vx":"0.25","vy":"0.00","grounded":true,"active":true,"width":16,"height":16,"physicsLayer":"enemy"}],"tileMapExists":false,"levelTileMap":true}
[LOG] [10s] Enemies: {"enemies":[{"type":"Slime","x":406,"y":192,"vx":"0.25","vy":"0.00","grounded":true,"active":true,"width":16,"height":16,"physicsLayer":"enemy"}],"tileMapExists":false,"levelTileMap":true}
[LOG] âœ… No errors detected
[LOG] âœ… Test completed
[LOG] 
âœ… TEST PASSED

[LOG] 
==================================================
[LOG] Test completed in: 25.37s
[LOG] ==================================================

